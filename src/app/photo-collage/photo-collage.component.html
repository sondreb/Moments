<div class="collage-container" 
     (dragover)="$event.preventDefault()" 
     (drop)="handleDrop($event)">
  <div class="toolbar">
    <span class="toolbar-label">Layouts:</span>
    <button *ngFor="let preset of presets" 
            class="preset-btn" 
            (click)="preset.apply()"
            [title]="preset.name">
      {{preset.icon}}
    </button>
  </div>
  <div class="canvas-container">
    <canvas #canvas></canvas>
    <div *ngIf="hoveredPhoto" 
         class="photo-controls" 
         [style.left.px]="controlsPosition.x" 
         [style.top.px]="controlsPosition.y"
         (mouseenter)="onControlsMouseEnter()"
         (mouseleave)="onControlsMouseLeave()">
      <div class="controls-row">
        <button (click)="rotatePhoto(-15)" class="control-btn">↺</button>
        <button (click)="rotatePhoto(15)" class="control-btn">↻</button>
        <button (click)="scalePhoto(0.9)" class="control-btn">-</button>
        <button (click)="scalePhoto(1.1)" class="control-btn">+</button>
      </div>
      <div class="controls-row">
        <button (click)="moveBackward(hoveredPhoto)" class="control-btn">↓</button>
        <button (click)="moveForward(hoveredPhoto)" class="control-btn">↑</button>
        <button (click)="moveToBack(hoveredPhoto)" class="control-btn">⤓</button>
        <button (click)="moveToFront(hoveredPhoto)" class="control-btn">⤒</button>
      </div>
      <div class="controls-row">
        <button (click)="removePhoto(hoveredPhoto)" class="control-btn remove-btn">×</button>
      </div>
    </div>
  </div>
  <input #fileInput 
         type="file" 
         accept="image/*" 
         multiple 
         (change)="handleFileSelect($event)" 
         style="display: none">
  <div class="controls">
    <button (click)="fileInput.click()">Add Photos</button>
    <div class="save-group">
      <div class="save-options">
        <div class="size-label">Size:</div>
        <div class="size-buttons">
          <button 
            (click)="setSaveSize('normal')" 
            [class.active]="saveSize === 'normal'"
            class="size-btn">
            Normal
          </button>
          <button 
            (click)="setSaveSize('medium')" 
            [class.active]="saveSize === 'medium'"
            class="size-btn">
            Medium
          </button>
          <button 
            (click)="setSaveSize('large')" 
            [class.active]="saveSize === 'large'"
            class="size-btn">
            Large
          </button>
        </div>
      </div>
      <button (click)="saveCollage()">Save Collage ({{saveSize}})</button>
    </div>
    <button (click)="resetCollage()">Reset</button>
  </div>
</div>
